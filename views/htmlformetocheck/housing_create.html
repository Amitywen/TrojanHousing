<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Create the new property</title>
        <script>
            document.addEventListener('DOMContentLoaded', () => {
                const newHousingForm = document.getElementById('newhousing');

                newPlayerForm.addEventListener('submit', async (event) => {
                    event.preventDefault(); // Prevent the default form submission

                    // Perform your client-side validation here
                    const landlordId = document.getElementById('landlordId');
                    const address = document.getElementById('address');
                    const numberOfRooms = document.getElementById('numberOfRooms');
                    const rent = document.getElementById('rent');
                    const securityDeposit= document.getElementById('securityDeposit');
                    const summary = document.getElementById('summary');
                    const nickname = document.getElementById('nickname');
                    const location = document.getElementById('location' );

                    // Construct the request body
                    const requestBody = {
                        landlordId: landlordId.value,
                        address: address.value,
                        numberOfRooms: numberOfRooms.value,
                        rent: rent.value, 
                        securityDeposit: securityDeposit.value, 
                        summary: summary.value,
                        nickname: nickname.value,
                        location: location.value
                        // redirect: '/players.html', not sure whethe is going?
                    };

                    // Send the data to the server using fetch
                    try {
                        const response = await fetch('/api/property', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify(requestBody),
                        });

                        if (response.ok) {
                            // Form submission successful, you can redirect the user
                            window.location.href = '/list_landlord.html';
                        } else {
                            const errorData = await response.json();
                            alert(`Server Error: ${errorData.message}`);
                        }
                    } catch (error) {
                        alert('An error occurred while communicating with the server.');
                    }
                });
            });
        </script>
    </head>
    <body>
        <h1>Create New Housing</h1>
        <form id="newhousing" action="/api/property" method="POST">
            <label for="landlordId">Landlord ID:</label>
            <input type="text" id="landlordId" name="landlordId" required>
            <br>
            <label for="address">address:</label>
            <input type="text" id="address" name="address" required> 
            <!-- <select id="lnumberOfRooms" name="numberOfRooms">
                <option value="1">Downtown</option>
                <option value="2">Ktown</option>
                <option value="3">UPS area</option>
                <option value="4">UPS area</option>
                <option value="5">UPS area</option>
            </select> -->
            <br>
            <label for="numberOfRooms">numberOfRooms:</label>
            <input type="number" id="numberOfRooms" name="numberOfRooms" required>
            <br> 
            <label for="rent">rent:</label>
            <input type="number" id="rent" name="rent" required> 
            <br>
            <label for="securityDeposit">securityDeposit:</label>
            <input type="number" id="securityDeposit" name="securityDeposit" required>
            <br> 
            <label for="summary">summary:</label>
            <input type="text" id="summary" name="summary" required> 
            <br>
            <label for="nickname">nickname:</label>
            <input type="text" id="nickname" name="nickname" required> 
            <br>
            <label for="location">location:</label>
            <select id="location" name="location" required> 
                <option value="downtown">Downtown</option>
                <option value="ktown">Ktown</option>
                <option value="UPS">UPS area</option>
            </select>
            <br>
            <!-- Other input fields for creating a new property -->
    
            <button type="submit">Create Housing</button>
        </form>
    </body>
</html>