<!-- should just type int the studnetID
get html with the 

app.get('/player/:id/edit.html', async (req, res) => {
    const render = util.promisify(res.render).bind(res);
    const body = await render('pages/player/edit');
    res.render('layout', { body });
});

to go to the student_apply.ejs
enter the stuff here and making sure 
and enter the studentID and submit it -->


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APPLY</title>
    <link rel="stylesheet" href="/styles.css">
    <script>
        // function showing(property){
        //     const Housinglist = document.querySelector('.property');
        //     Housinglist.innerHTML = ''; // Clear the existing content
        //     // console.log(65730bdc3f2ef4e7c7e38df8)
            
        //     const houseRow = document.createElement('tr');
        //     houseRow.innerHTML = `
        //         <td>${property.landlordId}</td>
        //         <td>${property.address}</td>
        //         <td>${property.numberOfRooms}</td>
        //         <td>${property.rent}</td>
        //         <td>${property.securityDeposit}</td>
        //         <td>${property.summary}/td>
        //         <td>${property.location}</td>
        //     `;
        //     Housinglist.appendChild(houseRow);
        // }

        document.addEventListener('DOMContentLoaded', async() => {
            const url = new URL(window.location.href)
            const propertyId = url.pathname.split('/')[2];
            console.log(propertyId)

            // try{                    
            //     fetch(`/api/property?propertyId=${propertyId}`)
            //     .then(response => response.json())
            //     .then(showing)
            //     .catch(error => {
            //         console.error('Error fetching data:', error);
            //     });
            //     ;
            //     }catch (error) {
            //         alert('An error occurred while communicating with the server.');
            //     }

            ApplyForm.addEventListener('submit', async (event) => {
                event.preventDefault(); // Prevent the default form submission

                // Perform your client-side validation here
                // const propertyId = document.getElementById('propertyId');
                const url = new URL(window.location.href)
                const propertyId = url.pathname.split('/')[2];
                const studentId = document.getElementById('studentId');

                // Construct the request body
                const requestBody = {
                    propertyId: propertyId.value,
                    studentId: studentId.value,
                };

                // Send the data to the server using fetch
                try {
                    const response = await fetch(`/api/application`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(requestBody),
                    });

                    if (response.ok) {
                        // Form submission successful, you can redirect the user
                        window.location.href = '/api/student/list_property.html';
                        // checknig the the href is right or not.
                    } else {
                        const errorData = await response.json();
                        alert(`Server Error: ${errorData.message}`);
                    }
                } catch (error) {
                    alert('An error occurred while communicating with the server.');
                }
            });
        });
    </script>
</head>
<body>
        <h1>Application</h1>
        <!-- showing the property here, but I didn't see anything about it -->
        <!-- <form id="editForm" action="/api/player/${playerId}" method="POST">   -->
            <!-- i wanna put the property here -->
            <div class="container">
                <table>
                    <thead>
                        <tr>
                            <th>landlordId</th>
                            <th>address</th>
                            <th>number OfRooms</th>
                            <th>rent</th>
                            <th>securityDeposit</th>
                            <th>summary</th>
                            <th>location</th>
                        </tr>
                    </thead>
                    <tbody class="property">
                        <% property.forEach((unit) => { %>
                            <tr>
                                <td><%= unit._id %></td>
                                <td><%= unit.address %></td>
                                <td><%= unit.numberOfRooms %></td>
                                <td><%= unit.rent %></td>
                                <td><%= unit.securityDeposit %></td>
                                <td><%= unit.summary %></td>
                                <td><%= unit.location %></td>
                            </tr>
                        <% }) %>
                    </tbody>
                </table>
            </div>

            <form id="ApplyForm" action="/api/application" method="POST">
                <p>Please enter your userID and submit it after reviewing.</p>
                <label for="studentId">studentId:</label>
                <input type="text" id="studentId" name="studentId" required>
                <br>
                <br>
                <!-- <input type="hidden" name="redirect" value="/players.html"> -->
                <button type="submit"> Save Changes </button>
            </form>
    
</body>
</html>
